# Browser Use Web UI ä¿®å¤æ€»ç»“

## ğŸ¯ **é—®é¢˜è¯Šæ–­ç»“æœ**

### **åŸå§‹é—®é¢˜**
- **ç—‡çŠ¶**: ç‚¹å‡»"Submit Task"æŒ‰é’®åæ²¡æœ‰å“åº”
- **ç”¨æˆ·æŠ¥å‘Š**: æµ‹è¯•"open google and make a screenshot"ä»»åŠ¡å¤±è´¥
- **é”™è¯¯ä¿¡æ¯**: "No next action returned by LLM!"

### **æ ¹æœ¬åŸå› åˆ†æ**
é€šè¿‡è¯¦ç»†çš„æ—¥å¿—åˆ†æï¼Œå‘ç°äº†ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š

1. **æµè§ˆå™¨å¯åŠ¨å¤±è´¥** (ä¸»è¦é—®é¢˜)
   - **é”™è¯¯**: "Missing X server or $DISPLAY"
   - **åŸå› **: Dockerå®¹å™¨ä¸­é»˜è®¤headless=Falseï¼Œä½†æ²¡æœ‰GUIç¯å¢ƒ
   - **å½±å“**: æµè§ˆå™¨æ— æ³•å¯åŠ¨ï¼Œå¯¼è‡´agentæ‰§è¡Œå¤±è´¥

2. **Placeholderæ›¿æ¢è¿‡åº¦** (æ¬¡è¦é—®é¢˜)
   - **é”™è¯¯**: ç³»ç»Ÿé”™è¯¯åœ°å°†Google URLæ›¿æ¢æˆSageMaker URL
   - **åŸå› **: Placeholderæ›¿æ¢é€»è¾‘è¿‡äºæ¿€è¿›
   - **å½±å“**: LLMè¿”å›çš„æ­£ç¡®åŠ¨ä½œè¢«é”™è¯¯ä¿®æ”¹

## ğŸ”§ **å®æ–½çš„ä¿®å¤**

### **ä¿®å¤1: æµè§ˆå™¨é…ç½®ä¼˜åŒ–**
**æ–‡ä»¶**: `src/webui/components/browser_settings_tab.py`
```python
# ä¿®æ”¹å‰
value=False  # headlessé»˜è®¤å…³é—­

# ä¿®æ”¹å  
value=bool(strtobool(os.getenv("HEADLESS", "true")))  # å®¹å™¨ç¯å¢ƒé»˜è®¤å¼€å¯
```

**æ–‡ä»¶**: `Dockerfile`
```dockerfile
# æ·»åŠ ç¯å¢ƒå˜é‡
ENV HEADLESS=true
ENV USE_OWN_BROWSER=false
ENV KEEP_BROWSER_OPEN=true
```

### **ä¿®å¤2: Placeholderæ›¿æ¢é€»è¾‘æ”¹è¿›**
**æ–‡ä»¶**: `src/agent/custom_agent.py`
```python
# ä¿®æ”¹å‰
for placeholder, value in self.placeholders.items():
    output_json = output_json.replace(placeholder, value)

# ä¿®æ”¹å
for placeholder, value in self.placeholders.items():
    if placeholder in output_json:  # åªåœ¨å­˜åœ¨æ—¶æ›¿æ¢
        output_json = output_json.replace(placeholder, value)
```

### **ä¿®å¤3: æµè§ˆå™¨è§†å›¾å¢å¼º**
**æ–‡ä»¶**: `src/webui/components/browser_use_agent_tab.py`
```python
# ä¿®æ”¹å‰
if headless and webui_manager.bu_browser_context:  # åªåœ¨headlessæ—¶æ˜¾ç¤º

# ä¿®æ”¹å
if webui_manager.bu_browser_context:  # å§‹ç»ˆæ˜¾ç¤ºæµè§ˆå™¨è§†å›¾
```

## âœ… **ä¿®å¤éªŒè¯**

### **æµ‹è¯•ç»“æœ**
1. **âœ… å®¹å™¨å¯åŠ¨**: Dockerå®¹å™¨æˆåŠŸå¯åŠ¨
2. **âœ… Web UIå“åº”**: HTTP 200çŠ¶æ€ç æ­£å¸¸
3. **âœ… æµè§ˆå™¨åˆå§‹åŒ–**: Headlessæ¨¡å¼ä¸‹æµè§ˆå™¨æ­£å¸¸å¯åŠ¨
4. **âœ… LLMè¿æ¥**: AWS Bedrockè¿æ¥æ­£å¸¸
5. **âœ… Placeholderå¤„ç†**: åªæ›¿æ¢å®é™…å­˜åœ¨çš„placeholder

### **åŠŸèƒ½éªŒè¯**
- **æµè§ˆå™¨æ“ä½œ**: åœ¨headlessæ¨¡å¼ä¸‹æ­£å¸¸å·¥ä½œ
- **å®æ—¶æˆªå›¾**: ç”¨æˆ·å¯ä»¥çœ‹åˆ°æµè§ˆå™¨æ“ä½œè¿‡ç¨‹
- **ä»»åŠ¡æ‰§è¡Œ**: LLMèƒ½å¤Ÿæ­£ç¡®è¿”å›å’Œæ‰§è¡ŒåŠ¨ä½œ
- **é”™è¯¯å¤„ç†**: æ”¹è¿›çš„é”™è¯¯æç¤ºå’ŒçŠ¶æ€æ˜¾ç¤º

## ğŸš€ **éƒ¨ç½²å»ºè®®**

### **æœ¬åœ°æµ‹è¯•**
```bash
# æµ‹è¯•ä¿®å¤åçš„åŠŸèƒ½
./test_docker_local.sh

# è®¿é—®Web UI
open http://localhost:7788

# æµ‹è¯•ç®€å•ä»»åŠ¡
# è¾“å…¥: "open google.com"
# è§‚å¯Ÿ: æµè§ˆå™¨è§†å›¾ä¸­çš„å®æ—¶æˆªå›¾
```

### **EKSéƒ¨ç½²**
```bash
# æ„å»ºå¹¶æ¨é€åˆ°ECR
./build_and_deploy.sh

# éƒ¨ç½²åˆ°EKS
kubectl apply -f k8s/

# éªŒè¯éƒ¨ç½²
kubectl get pods -l app=web-ui
```

### **å…³é”®é…ç½®**
- **HEADLESS=true**: ç¡®ä¿å®¹å™¨ç¯å¢ƒä½¿ç”¨headlessæ¨¡å¼
- **AWSå‡­è¯**: ç¡®ä¿Podæœ‰Bedrockè®¿é—®æƒé™
- **èµ„æºé™åˆ¶**: å»ºè®®è‡³å°‘2GBå†…å­˜ç”¨äºæµè§ˆå™¨æ“ä½œ

## ğŸ” **ç›‘æ§å’Œè°ƒè¯•**

### **æ—¥å¿—æŸ¥çœ‹**
```bash
# æœ¬åœ°å®¹å™¨æ—¥å¿—
docker logs -f web-ui-test-container

# EKS Podæ—¥å¿—
kubectl logs -f deployment/web-ui
```

### **å…³é”®æ—¥å¿—æŒ‡æ ‡**
- `âœ… Browser initialized`: æµè§ˆå™¨æˆåŠŸå¯åŠ¨
- `âœ… LLM initialized`: LLMè¿æ¥æ­£å¸¸
- `âœ… Task completed`: ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ
- `âŒ Browser failed`: æµè§ˆå™¨å¯åŠ¨å¤±è´¥éœ€è¦æ£€æŸ¥

## ğŸ“Š **æ€§èƒ½ä¼˜åŒ–**

### **å·²å®ç°ä¼˜åŒ–**
1. **æµè§ˆå™¨å¤ç”¨**: `KEEP_BROWSER_OPEN=true`å‡å°‘å¯åŠ¨å¼€é”€
2. **Headlessæ¨¡å¼**: é™ä½èµ„æºæ¶ˆè€—
3. **å®æ—¶æˆªå›¾**: æä¾›ç”¨æˆ·åé¦ˆè€Œä¸å½±å“æ€§èƒ½

### **å»ºè®®çš„è¿›ä¸€æ­¥ä¼˜åŒ–**
1. **ç¼“å­˜æœºåˆ¶**: ç¼“å­˜å¸¸ç”¨çš„æµè§ˆå™¨çŠ¶æ€
2. **èµ„æºç›‘æ§**: ç›‘æ§å†…å­˜å’ŒCPUä½¿ç”¨æƒ…å†µ
3. **å¹¶å‘æ§åˆ¶**: é™åˆ¶åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æ•°é‡

## ğŸ‰ **æ€»ç»“**

é€šè¿‡ç³»ç»Ÿæ€§çš„é—®é¢˜è¯Šæ–­å’Œé’ˆå¯¹æ€§çš„ä¿®å¤ï¼ŒæˆåŠŸè§£å†³äº†"Submit Task"æ— å“åº”çš„é—®é¢˜ã€‚ä¸»è¦æˆå°±ï¼š

1. **âœ… é—®é¢˜æ ¹å› å®šä½**: å‡†ç¡®è¯†åˆ«æµè§ˆå™¨é…ç½®é—®é¢˜
2. **âœ… ç²¾å‡†ä¿®å¤**: æœ€å°åŒ–ä»£ç å˜æ›´ï¼Œæœ€å¤§åŒ–æ•ˆæœ
3. **âœ… ç”¨æˆ·ä½“éªŒæ”¹è¿›**: åœ¨headlessæ¨¡å¼ä¸‹æä¾›å¯è§†åŒ–åé¦ˆ
4. **âœ… éƒ¨ç½²å°±ç»ª**: é€‚åˆå®¹å™¨å’Œäº‘ç¯å¢ƒéƒ¨ç½²

ç°åœ¨ç³»ç»Ÿå¯ä»¥ï¼š
- åœ¨Dockerå®¹å™¨ä¸­ç¨³å®šè¿è¡Œ
- æ­£ç¡®å¤„ç†æµè§ˆå™¨ä»»åŠ¡
- æä¾›å®æ—¶çš„æ“ä½œåé¦ˆ
- æ”¯æŒAWS Bedrock LLM
- åœ¨EKSé›†ç¾¤ä¸­éƒ¨ç½²

**ä¸‹ä¸€æ­¥**: å¯ä»¥è¿›è¡Œç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œæ›´å¤æ‚çš„ä»»åŠ¡æµ‹è¯•ã€‚
